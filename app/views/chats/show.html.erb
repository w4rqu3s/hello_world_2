<div class="container">
  <!-- Lista de chats -->
  <div class="chat-list">
    <h5>Chats Disponíveis</h5>
    <ul>
      <% @chats.each do |chat_item| %>
        <li>
          <%= link_to "Chat ##{chat_item.id}", chat_path(chat_item), class: (chat_item.id == @chat.id ? "active" : "") %>
        </li>
      <% end %>
    </ul>

    <%= button_to "Criar Novo Chat", chats_path, method: :post, class: "btn" %>
  </div>

  <!-- Chat aberto -->
  <div class="chat-window">
    <!-- Cabeçalho -->
    <div class="chat-header">
      <%= link_to "← Voltar", root_path, class: "back-button" %>
      <h2>Chat #<%= @chat.id %></h2>
    </div>

    <!-- Mensagens -->
    <div class="messages-container"
         data-controller="chat-subscription"
         data-chat-subscription-chat-id-value="<%= @chat.id %>"
         data-chat-subscription-target="messages">
      <%= render @chat.messages %>
    </div>

    <!-- Campo de envio -->
    <div class="message-input-container">
      <div class="input-group" 
           data-controller="message-form" 
           data-message-form-chat-id-value="<%= @chat.id %>">
        <input data-message-form-target="input" 
               type="text" 
               placeholder="Digite sua mensagem..." 
               class="message-input" />
        <button data-action="click->message-form#send" 
                class="send-button">Enviar</button>
      </div>
    </div>
  </div>
</div>
